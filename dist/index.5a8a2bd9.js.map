{"mappings":"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","sources":["static/index.js"],"sourcesContent":["const start = document.getElementById(\"start\")\nconst stop = document.getElementById(\"stop\")\nconst reset = document.getElementById(\"reset\")\n\nconst timerDisplay = document.getElementById(\"timerDisplay\")\nconst infoButton = document.getElementById(\"infoButton\")\nconst infoIcon = document.getElementById(\"infoIcon\")\nconst infoButtonText = document.getElementById(\"infoButtonText\")\n\nconst countdownInput = document.getElementById(\"countdownInput\")\nconst countdownSaveButton = document.getElementById(\"countdownSaveButton\")\nconst countdownSaveIcon = document.getElementById(\"countdownSaveIcon\")\n\nconst deleteBackgroundButton = document.getElementById(\"deleteBackgroundButton\")\nconst backgroundInput = document.getElementById(\"backgroundInput\")\n\nconst settingsDropdownButton = document.getElementById(\"settingsDropdownButton\")\nconst settingsDropdownIcon = document.getElementById(\"settingsDropdownIcon\")\nconst settingsContent = document.getElementById(\"settingsContent\")\n\nconst noConnectionMessage = document.getElementById(\"noConnectionMessage\")\n\nlet timer = null\nlet settings = null\nlet timerClockOffset = 0\n\nconst updateButtons = () => {\n  if (timer == null || timer.state == \"Reset\") {\n    start.disabled = false\n    stop.disabled = true\n    reset.disabled = true\n  } else if (timer.state == \"Stopped\") {\n    start.disabled = true\n    stop.disabled = true\n    reset.disabled = false\n  } else {\n    start.disabled = true\n    stop.disabled = false\n    reset.disabled = false\n  }\n}\n\nconst formatTimer = () => {\n  const now = Date.now() + timerClockOffset\n  const timeElapsed = now - timer.startedAt\n  const adjustedTime = timeElapsed - timer.countdown * 1000\n\n  const isCountdown = adjustedTime < 0\n\n  if (isCountdown) {\n    return Math.ceil(-adjustedTime/1000).toString()\n  } else {\n    const hundredths = Math.floor((adjustedTime / 10) % 100)\n    const seconds = Math.floor((adjustedTime / 1000) % 60)\n    const minutes = Math.floor(adjustedTime / (1000 * 60))\n\n    return `${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}.${hundredths.toString().padStart(2, \"0\")}`\n  }\n}\n\nconst updateTimerDisplay = () => {\n  if (timer == null || timer.state == \"Reset\") {\n    timerDisplay.innerHTML = \"00:00.00\"\n  } else if (timer.state == \"Stopped\") {\n    timerDisplay.innerHTML = timer.formatted\n  } else {\n    timerDisplay.innerHTML = formatTimer()\n  }\n}\n\n\nconst updateSettings = () => {\n  if (settings == null) {\n    return // todo idk\n  }\n\n  if (settings.showDebug) {\n    infoButtonText.innerText = \"Schowaj informacje\"\n    infoIcon.classList.remove(\"fa-eye\")\n    infoIcon.classList.add(\"fa-eye-slash\")\n  } else {\n    infoButtonText.innerText = \"WyÅ›wietl informacje\"\n    infoIcon.classList.remove(\"fa-eye-slash\")\n    infoIcon.classList.add(\"fa-eye\")\n  }\n\n  countdownInput.value = settings.countdown\n  countdownSaveButton.disabled = true\n}\n\ncountdownInput.addEventListener(\"input\", e => {\n  countdownSaveButton.disabled = parseInt(e.target.value) == settings.countdown\n})\n\ncountdownSaveButton.addEventListener(\"click\", e => {\n  fetch(\"/api/set_countdown\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({ countdown: parseInt(countdownInput.value) })\n  })\n})\n\ndeleteBackgroundButton.addEventListener(\"click\", e => {\n  fetch(\"/api/delete_background\", {\n    method: \"POST\",\n  })\n})\n\nbackgroundInput.addEventListener(\"change\", e => {\n  const data = new FormData()\n  data.append(\"background\", e.target.files[0])\n  fetch(\"/api/upload_background\", {\n    method: \"POST\",\n    body: data,\n  })\n})\n\nsettingsDropdownButton.addEventListener(\"click\", _ => {\n  settingsContent.classList.toggle(\"is-hidden\")\n\n  if (settingsDropdownIcon.classList.contains(\"fa-angle-down\")) {\n    settingsDropdownIcon.classList.remove(\"fa-angle-down\")\n    settingsDropdownIcon.classList.add(\"fa-angle-up\")\n  } else {\n    settingsDropdownIcon.classList.remove(\"fa-angle-up\")\n    settingsDropdownIcon.classList.add(\"fa-angle-down\")\n  }\n})\n\nstart.addEventListener(\"click\", e => {\n  e.preventDefault()\n  fetch(\"/api/start_timer\", { method: \"POST\" })\n})\n\nstop.addEventListener(\"click\", e => {\n  e.preventDefault()\n  fetch(\"/api/stop_timer\", { method: \"POST\" })\n})\n\nreset.addEventListener(\"click\", e => {\n  e.preventDefault()\n  fetch(\"/api/reset_timer\", { method: \"POST\" })\n})\n\nconst settingsForm = document.getElementById(\"settings\")\n\nsettingsForm.addEventListener(\"submit\", e => {\n  e.preventDefault()\n})\n\ninfoButton.addEventListener(\"click\", e => {\n  if (settings == null) {\n    return\n  }\n\n  if (settings.showDebug) {\n    fetch(\"/api/disable_debug\", { method: \"POST\" })\n  } else {\n    fetch(\"/api/enable_debug\", { method: \"POST\" })\n  }\n})\n\nconst frameCallback = () => {\n  updateTimerDisplay()\n  requestAnimationFrame(frameCallback)\n}\n\nlet events = null\nlet lastPing = Date.now()\nlet keepAliveInterval = null\n\nconst setupEvents = () => {\n  events = new EventSource(\"/api/events\")\n\n  events.addEventListener(\"open\", _ => {\n    noConnectionMessage.classList.add(\"is-hidden\")\n    clearInterval(keepAliveInterval)\n\n    lastPing = Date.now()\n    keepAliveInternal = setInterval(_ => {\n      const timeSincePing = Date.now() - lastPing\n      if (timeSincePing > 11000) {\n        events.close()\n        noConnectionMessage.classList.remove(\"is-hidden\")\n        setupEvents()\n      }\n    }, 1000)\n  })\n\n  events.addEventListener(\"error\", _ => {\n    noConnectionMessage.classList.remove(\"is-hidden\")\n  })\n\n  events.addEventListener(\"syncTimers\", e => {\n    const data = JSON.parse(e.data)\n    const newTimer = data.timer\n\n    if (newTimer.startedAt != null) {\n      newTimer.startedAt = Date.parse(newTimer.startedAt)\n    }\n\n    if (newTimer.stoppedAt != null) {\n      newTimer.stoppedAt = Date.parse(newTimer.stoppedAt)\n    }\n\n    timer = newTimer\n    timerClockOffset = Date.parse(data.now) - Date.now()\n\n    updateButtons()\n  })\n\n\n  events.addEventListener(\"ping\", _ => {\n    lastPing = Date.now()\n  })\n\n  events.addEventListener(\"syncSettings\", e => {\n    const data = JSON.parse(e.data)\n    settings = data.settings\n\n    updateSettings()\n  })\n\n  fetch(\"/api/request_sync\", {\n    method: \"POST\",\n  })\n}\n\nsetupEvents()\n\nframeCallback()\n"],"names":[],"version":3,"file":"index.5a8a2bd9.js.map","sourceRoot":"/__parcel_source_root/"}